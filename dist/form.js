!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),a=n(3),r=n(4),s=n(5),c=n(6),u=n(7);n(8),n(9);class l extends HTMLElement{constructor(){super(),this.setChangeHandler=(e,t)=>{const n=this.find(e);null==n||n.addEventListener("change",t)},this.setInputHandler=(e,t)=>{const n=this.find(e);null==n||n.addEventListener("input",t)},this.setClickHandler=(e,t)=>{const n=this.find(e);null==n||n.addEventListener("click",t)},this.find=e=>this.shadow.querySelector(e),this.handleMonthIcomeInput=e=>{e.currentTarget&&this.updateState({monthlyIncome:e.currentTarget.value,annualIncome:12*e.currentTarget.value})},this.handleAnnualIncomeInput=e=>{e.currentTarget&&this.updateState({monthlyIncome:e.currentTarget.value&&u.isValidNumber(e.currentTarget.value)?(e.currentTarget.value/12).toFixed(2):void 0,annualIncome:e.currentTarget.value})},this.handleTaxSelection=e=>{this.showIncorectTaxMessage(!1),this.updateState({selectedTax:e})},this.showIncorectTaxMessage=e=>{const t=this.find("section.incorrect-tax"),n=this.find("section.income-input");e?(null==t||t.classList.add("visible"),null==n||n.classList.remove("visible")):(null==t||t.classList.remove("visible"),null==n||n.classList.add("visible"))},this.handleIcomeSelection=e=>t=>{this.updateState({selectedIncome:e})},this.handleCalculation=()=>{if(this.state.selectedTax&&u.isValidNumber(this.state.annualIncome)){const e=this.find(".tax-output"),t=this.state.selectedTax===o.Tax.PIT?r.calculateForPIT(this.state.annualIncome||0):s.calculateForCIT(this.state.annualIncome||0),n=this.formatter.format(t.donationSum),i=this.formatter.format(t.taxDeduction);e.innerHTML=`\n                <p>Od podatku możesz odliczyć darowizny w maksymalnej kwocie:</p>\n                <div class="max-donation">${n}</div>\n                <p>W ten sposób zapłacisz nawet o <strong>${i}</strong> mniej podatku!</p>\n            `}},this.renderInput=(e,t,n,...i)=>{const o=this.find(e+" .income-input");if(o){o.value=t?t.toString():"",o.disabled=n;const a=this.find(e+" .input-wrapper .validation");a&&u.applyValidation(a,t,i)}},this.state={},this.shadow=this.attachShadow({mode:"open"}),this.formatter=new c.CurrencyFormatter("PLN","pl-PL")}updateState(e){this.state=Object.assign(Object.assign({},this.state),e),this.render()}connectedCallback(){return i(this,void 0,void 0,(function*(){const e=yield a.getTemplate("./form.html");this.shadow.appendChild(null==e?void 0:e.content.cloneNode(!0)),this.setChangeHandler(".tax-pit .radio-input",a.preventPropagationInvoke(()=>this.handleTaxSelection(o.Tax.PIT))),this.setChangeHandler(".tax-pit19 .radio-input",a.preventPropagationInvoke(()=>this.showIncorectTaxMessage(!0))),this.setChangeHandler(".tax-cit .radio-input",a.preventPropagationInvoke(()=>this.handleTaxSelection(o.Tax.CIT))),this.setChangeHandler(".month-income .radio-input",this.handleIcomeSelection(o.IncomeType.MONTHLY)),this.setInputHandler(".month-income .income-input",this.handleMonthIcomeInput),this.setChangeHandler(".annual-income .radio-input",this.handleIcomeSelection(o.IncomeType.ANNUAL)),this.setInputHandler(".annual-income .income-input",this.handleAnnualIncomeInput),this.setClickHandler("#calculate-donation-btn",a.preventPropagationInvoke(this.handleCalculation)),this.render()}))}render(){return i(this,void 0,void 0,(function*(){const e=this.state.selectedIncome!==o.IncomeType.MONTHLY;this.renderInput(".month-income",this.state.monthlyIncome||0,e,[u.isValidNumber,"Miesięczny dochód powinien być liczbą"]);const t=this.state.selectedIncome!==o.IncomeType.ANNUAL;this.renderInput(".annual-income",this.state.annualIncome||0,t,[u.isValidNumber,"Roczny dochód powinien być liczbą"]);this.find("#calculate-donation-btn").disabled=!this.state.selectedTax||!this.state.annualIncome}))}}customElements.get("donation-form")||customElements.define("donation-form",l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IncomeType=t.Tax=void 0,function(e){e.PIT="PIT",e.CIT="CIT"}(t.Tax||(t.Tax={})),function(e){e.MONTHLY="MONTHLY",e.ANNUAL="ANNUAL"}(t.IncomeType||(t.IncomeType={}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.preventPropagation=t.preventPropagationInvoke=t.getTemplate=void 0,t.getTemplate=(e,t="template")=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(e),i=yield n.text();return(new DOMParser).parseFromString(i,"text/html").querySelector(t)})),t.preventPropagationInvoke=e=>t=>{t.preventDefault(),t.stopPropagation(),e()},t.preventPropagation=e=>{e.preventDefault(),e.stopPropagation()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateForPIT=void 0;t.calculateForPIT=e=>{const t=i(e);return{donationSum:t,taxDeduction:o(e)-o(e-t)}};const i=e=>e>8e3?.06*e:0,o=e=>{if(e<=8e3)return 0;if(e<=13e3){return.17*e-(e=>1360-834.88/5e3*(e-8e3))(e)}if(e<=85528)return.17*e-525.12;if(e<=127e3){return 14539.76+.32*(e-85528)-(e=>525.12-525.12/41472*(e-85528))(e)}return 14539.76+.32*(e-85528)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateForCIT=void 0;t.calculateForCIT=e=>({donationSum:i(e),taxDeduction:o(e)});const i=e=>.1*e,o=e=>e<=5484e3?.09*i(e):.09*i(5484e3)+.19*i(e-5484e3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CurrencyFormatter=void 0;t.CurrencyFormatter=class{constructor(e,t){this.format=e=>this.formatter.format(e),this.formatter=new Intl.NumberFormat(t,{style:"currency",currency:e,minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyValidation=t.isValidNumber=void 0,t.isValidNumber=e=>!e||!isNaN(e)&&e>-1,t.applyValidation=(e,t,n)=>{e.innerHTML="",n.forEach(n=>{const i=n[0],o=n[1];if(!i(t)){const t=document.createElement("div");t.className="validation-message",t.innerHTML=o,null==e||e.appendChild(t)}})}},function(e,t,n){},function(e,t,n){}]);